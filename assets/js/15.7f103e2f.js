(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{384:function(s,t,a){"use strict";a.r(t);var r=a(45),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用教程"}},[s._v("#")]),s._v(" 使用教程")]),s._v(" "),a("h2",{attrs:{id:"项目初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目初始化"}},[s._v("#")]),s._v(" 项目初始化")]),s._v(" "),a("p",[s._v("使用脚手架 "),a("RouterLink",{attrs:{to:"/cli/"}},[s._v("@sfadminltd/cli")]),s._v(" 创建一个标准的Nest项目：")],1),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sfadmin create my-project\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("请根据提示选择 "),a("strong",[s._v("midway")]),s._v(" 模板")])]),s._v(" "),a("p",[s._v("待脚手架创建项目完毕后，进入"),a("code",[s._v("my-project")]),s._v("目录，会有一个"),a("code",[s._v("server")]),s._v("和"),a("code",[s._v("vue")]),s._v("文件夹，分别是后端代码以及前端代码。")]),s._v(" "),a("h2",{attrs:{id:"导入脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入脚本"}},[s._v("#")]),s._v(" 导入脚本")]),s._v(" "),a("p",[s._v("命令行进入到创建好的后端目录"),a("code",[s._v("my-project/server")]),s._v("后，执行脚手架"),a("code",[s._v("load")]),s._v("命令导入sql脚本，所有的脚本都位于"),a("code",[s._v("sql")]),s._v("目录")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ sfadmin load -e ./sql -u root -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" -t "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(" -a localhost -b my-admin -o\nSF-ADMIN-CLI info load Trying to connect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSF-ADMIN-CLI info load Connection succeeded\nSF-ADMIN-CLI notice load importing sql: my-project/server/sql/init.sql\nSF-ADMIN-CLI info load "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" sql "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n┌─────────┬───────────────────────┐\n│ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" │  Tables_in_my-admin   │\n├─────────┼───────────────────────┤\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    │   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_department'")]),s._v("    │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    │    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_login_log'")]),s._v("    │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("    │      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_menu'")]),s._v("       │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("    │     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_req_log'")]),s._v("     │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    │      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_role'")]),s._v("       │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("    │ "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_role_department'")]),s._v(" │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("    │    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_role_menu'")]),s._v("    │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("    │      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_task'")]),s._v("       │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("    │    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_task_log'")]),s._v("     │\n│    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("    │      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_user'")]),s._v("       │\n│   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("    │    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sys_user_role'")]),s._v("    │\n└─────────┴───────────────────────┘\n")])])]),a("blockquote",[a("p",[s._v("示例下的命令参数具体含义请查看"),a("RouterLink",{attrs:{to:"/cli/"}},[s._v("CLI教程")])],1)]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("这里需要你提前准备好MySQL环境\n"),a("br"),s._v("\n也可以不使用脚手架进行导入，可自行手动创建数据库及导入脚本")])]),s._v(" "),a("h2",{attrs:{id:"修改开发配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改开发配置"}},[s._v("#")]),s._v(" 修改开发配置")]),s._v(" "),a("p",[s._v("后端文件配置在后端目录下的"),a("code",[s._v("src/config")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─config.local.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─plugin.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─config.prod.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─config.default.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─config.unittest.ts\n")])])]),a("p",[s._v("开发环境下请修改"),a("code",[s._v("config.local.ts")]),s._v("，生产环境下修改"),a("code",[s._v("config.prod.ts")]),s._v("。")]),s._v(" "),a("p",[s._v("配置功能请查看Midway官方文档："),a("a",{attrs:{href:"https://www.yuque.com/midwayjs/midway_v2/env_config",target:"_blank",rel:"noopener noreferrer"}},[s._v("多环境配置"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[s._v("#")]),s._v(" 运行")]),s._v(" "),a("p",[s._v("分别进入后端目录及前端目录，运行"),a("code",[s._v("npm run dev")]),s._v("即可")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" server\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vue")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" vue\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])])]),a("p",[s._v("运行后即可访问： "),a("a",{attrs:{href:"http://localhost:9528/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:9528/"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"目录结构说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构说明"}},[s._v("#")]),s._v(" 目录结构说明")]),s._v(" "),a("p",[s._v("后端"),a("code",[s._v("src")]),s._v("目录结构：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─dto "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Api参数校验DTO定义")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─middleware "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 中间件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─config "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─entity "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TypeORM实体类定义")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─controller\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─base.ts "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基类Controller")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─admin "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台模块controller")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─swagger.ts "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# swagger文档")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─common "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目通用工具及错误码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─error_constants.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─utils.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─interface.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─task "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基于 midway-bull 包定义的定时任务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─service\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─base.ts "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# BaseService基类")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─admin "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Admin模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─comm "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通用模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─sys "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─interface.ts\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─subscribe "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定时任务定义")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─common\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─mailer "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 邮件服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─amap "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 高德api")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("─configuration.ts "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Application")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);